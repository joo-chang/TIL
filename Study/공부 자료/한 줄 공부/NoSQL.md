## NoSQL

> NoSQL은 대부분 Not Only SQL로 설명한다. 기존의 RDBMS 방식을 탈피한 데이터베이스를 의미한다.
> 위에서 얘기한 RDBMS의 한계를 극복하기 위해 데이터 저장소의 새로운 형태로, 수평적 확장성을 가지고 있다.
> 문서, 그래프, key-value, in-memory, 검색을 포함해 다양한 데이터 모델을 사용한다. NoSQL은 클라우드 환경에 맞는 저장 기술 2000년대 스토리지 비용이 크게 하락하면서, RDBMS가 갖는 장점 중 하나인 데이터 중복 감소의 비용보다, 개발자 생산성(테이블 설계 비용)이 커졌기 때문에 NoSQL이 각광받기 시작했다.
> NoSQL은 개발자가 SQL을 배우거나 DBMS의 기본 아키텍처를 이해하지 않고도 API를 통해 쿼리를 실행할 수 있다.

### NoSQL 특징

- RDBMS와 달리 데이터간 관계를 정의하지 않는다.
- RDBMS에 비해 훨씬 대용량의 데이터를 저장할 수 있다.
- 반정형화, 비정형화된 데이터에 적합하다.
- 분산형 구조이고, 확장성이 뛰어나다
- 고정되지 않은 테이블 스키마를 가진다.
- ACID 대신 Eventual Consistency(궁극적 일관성)를 허용한다.
	- Eventual Consistency : 다양한 기기에 분산 저장되어 있는 데이터를 Update할 경우 실시간으로 다른 기기에 전파하기 어려운데 이 점을 조금 타협하여 최신은 아닐 수 있지만 Update 전까지는 최신 데이터를 반환한다.

### 유형

#### 문서 데이터베이스

- 문서 데이터베이스는 JSON 객체와 비슷한 문서에 데이터를 저장한다. 각 문서에는 필드와 값의 쌍이 포함되어 있다. 일반적으로 값은 문자열, 숫자, boolean, array, 객체 등 유형이 다양할 수 있고, 구조는 개발자가 코드에서 사용하고 있는 객체에 맞춰 조정된다. 대표적으로 MongoDB가 있다.

![[Pasted image 20240621162821.png]]

#### key-value 데이터베이스

- key-value 데이터베이스는 각 항목에 키와 값이 포함되어 있는 보다 간단한 유형의 데이터베이스이다. 값은 보통 키를 참조하는 방식으로만 검색이 가능하기 때문에 일반적으로 특정 key-value 쌍에 대해 쿼리를 수행하는 방법이 간단하다.
- key-value 데이터베이스는 대량의 데이터를 저장해야 하지만 검색을 위해 복잡한 쿼리를 수행할 필요가 없는 사용 사례에 적합하다. 일반적으로 사용자 선호도 저장 또는 캐싱에 사용된다.
- 대표적으로 Redis와 DynamoDB가 있다.

#### 와이드 컬럼 스토어

- 와이드 컬럼 스토어는 테이블, 행 및 동적 열에 데이터를 저장한다. 각 행이 동일한 열을 가질 필요가 없다는 점에서 관계형 데이터베이스에 비해 뛰어난 유연성을 제공한다.
- 2차원적인 key-value 스토어라고 생각할 수 있다. 와이드 컬럼 스토어는 대량의 데이터를 저장해야 할 때 적합하며, 쿼리 패턴을 예측할 수 있다. 와이드 컬럼 스토어는 보통 사물인터넷 데이터와 사용자 프로필 데이터를 저장하는 데 사용된다.
- 대표적으로 Cassandra와 HBase가 있다.

#### 그래프 데이터베이스

- 그래프 데이터베이스는 노드와 엣지에 데이터를 저장한다. 노드에는 일반적으로 사람, 장소 및 사물에 대한 정보가 저장되고, 엣지에는 노드 간의 관계에 대한 정보가 저장된다. 그래프 데이터베이스는 소셜 네트워크, 사기 탐지, 권장 엔진 같은 패턴을 찾아보기 위해 관계를 상세히 검토해야 하는 사용 사례에 적합하다.
- 대표적으로 Neo4j와 JanusGraph가 있다.


### 장점

- 스키마가 없기 때문에 유연한 데이터 구조를 가질 수 있다. (유연성)
- 데이터 분산이 용이하며 성능 향상을 위한 Scale-up, Scale-out 둘 다 가능하다. (확장성)
- 특정 데이터 모델 및 액세스 패턴에 대해 최적화 되어 관계형 DB를 통해 유사한 기능을 충족하려 할 때보다 뛰어난 성능을 가진다. (고성능)
- 각 데이터 모델에 맞춰 특별히 구축된 뛰어난 기능의 API와 데이터 유형을 제공한다. (고기능성)

### 단점

- 데이터의 중복이 있을 수 있다.
- 스키마가 존재하지 않아 명확한 데이터 구조를 보장하지 못한다.
- 인력 운영이 더 비싸다. (러닝커브가 높다)

---
## 언제 어떤 DBMS를 사용해야 할까?

### RDBMS

- ACID를 보장해야 할 때
	- ACID 보장은 트랜잭션이 데이터베이스와 상호 작용하는 방식을 정확히 규정하여 에러를 줄이고, 데이터베이스의 무결성을 보호한다. 일반적으로 NoSQL은 유연성과 처리 속도를 위해 ACID 준수를 희생하지만 많은 전자 상거래 및 금융 애플리케이션의 경우 ACID 보장 데이터베이스가 여전히 선호된다.
- 명확한 스키마가 중요한 경우
- 데이터의 중복이 없고 변경이 용이하기 때문에 데이터가 자주 변경이 일어나는 경우
- 클라우드 컴퓨팅 및 스토리지를 최대한 활용할 때
	- 클라우드 기반 스토리지는 탁월한 비용 절감 솔루션이지만 확장하려면 데이터를 여러 서버에 쉽게 분산시켜야 한다. 온사이트 또는 클라우드에서 상용 하드웨어를 사용하면 추가 소프트웨어의 번거로움을 줄일 수 있으며 Cassandra와 같은 NoSQL은 많은 골칫거리 없이 즉시 여러 데이터 센터에 걸쳐 확장할 수 있도록 설계되어 있다.

### NoSQL

- NoSQL은 데이터 구조를 알 수 없는 경우 사용하는 것이 좋다.
- Update가 많이 이뤄지지 않는 시스템이 좋다.
- Scale-out이 가능하다는 장점이 있어대용량 데이터를 저장하는 경우 적합하다.
- 기존의 정형화된 데이터 뿐만 아니라 채팅, 음성 등 반정형화, 비정형화된 데이터도 저장하고 다루어야 하는 경우
- 대규모 데이터를 다루는데 해당 데이터의 특징이 자주 바뀌는 경우
- 강력한 일관성보다 성능과 가용성이 더 중요한 서비스인 경우
- ACID 특징이 필요 없는 읽기 전용 데이터를 관리하는 경우

---

#### Q1. RDBMS와 NoSQL의 실제 데이터의 저장 용량은 어느정도인가/

- NoSQL은 데이터의 중복성을 RDBMS보다 적게 신경쓰므로, 동일한 데이터를 저장할 때 RDBMS보다 용량을 많이 차지한다.

#### Q2. 비정형 데이터는 영상, 음성 등은 NoSQL에서 어떻게 저장되는가?

- 파일 스토리지에 저장하고, 그 경로를 저장하는 경우가 많다. 음성 및 영상 데이터는 중복 가능성이 없고 데이터가 지나치게 크기 때문이다.

#### Q3. 유저 정보를 저장할 때, NoSQL을 고려해볼만 하다고 하는데, 그 이유는?

- 유저 정보는 비정형 데이터인 경우가 많기 때문이다.

#### Q4. 일반적인 게시판 프로젝트에서 어떤 DB를 선택해야할까?

- 요구사항에 따라 다르다. 주로 어느 정도 요구사항이 나와있는 게시판 프로젝트는 RDBMS가 적절하지만, 변경 가능성이 많다면 NoSQL도 고려해 볼만하다.
