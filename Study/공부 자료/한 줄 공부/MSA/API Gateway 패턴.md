# API Gateway

> API Gateway는 RESTful 하게 작성된 모든 서비스의 API를 손쉽게 관리하여 인증을 통한 자원의 효율적인 분배를 수행하는 기능이다.

MSA는 여러 개의 서비스로 프로젝트를 분리한다. 여기서 다음과 같은 문제들이 생길 수 있다.

- 클라이언트에서 요청된 사용자의 정보는 어떤 서비스가 맡아야 할지. 
- 인증은 어디서 수행할지.
- 로깅은 어떻게 처리할지.

여기서 등장하는 게 API Gateway이다. 만약 API Gateway가 존재하지 않았다면 모든 서비스에 공통된 작업이 들어가야 해서 비효율적인 작업을 수행해야 한다.

API Gateway는 하나의 프로젝트에서 관리할 수 있다. 모든 클라이언트의 요청이 하나의 서버로 들어와 해당 서버에서 요청이 정제되어 각자 목적에 맞는 서비스를 찾아가도록 도와주는 방식이다.
또한, 각 서비스에서 적절한 로직을 수행한 뒤 발생하는 응답 데이터를 모아 사용자에게 전달해주는 역할을 한다.

## 역할

API Gateway의 대표적으로 다음과 같은 역할을 한다.

- 프록시 역할과 로드밸런싱
- 인증 서버 기능
- 로깅 서버 기능

모든 데이터가 API Gateway 서버로 전송 되므로 인증을 수행하기도하고, 로깅을 수행하기도 한다.

## 고려사항

API Gateway는 여러 단점과 고려해야할 사항이 있다.

### 병목 현상

만약 서비스가 100개가 존재한다고 가정하면 API Gateway는 100개 서비스에서의 트래픽을 감당해야 한다. 그로 인해 병목 현상이 발생할 수 있으며, 전체적인 서비스 통신에 문제가 생길 수 있다.

그래서 API Gateway는 적절한 Sacle-Out이 필요하다.

### Network Latency

> Networ Latency란? 하나의 데이터 패킷을 한 지점에서 다른 지점으로 보내는 데 소요되는 시간을 표현한 것이다.

API Gateway는 당연히 네트워크를 한 번 더 거치기 때문에 네트워크 지연 현상이 발생할 수 있다.

## 지원 도구 및 기술

- Nginx
- Spring Cloud Gateway
- Spirng Cloud Zuul
- AWS API Gateway

