## 세션을 사용하는 이유?

세션은 HTTP프로토콜의 특징이자 약점을 보완하기 위해 사용된다. 

1. Connectionless, Protocol 비연결지향
	- 클라이언트가 서버에 요청했을 때, 그 요청에 맞는 응답을 보낸 후 연결을 끊는 처리방식

2. Stateless Protocol (상태정보 유지 안함)
	- 클라이언트의 상태정보를 가지지 않는 서버처리방식이다.
	- 클라이언트와 첫번째 통신에서 데이터를 주고받았다 해도, 두번째 통신에서 이전 데이터를 유지하지 않는다.

하지만 실제로는 데이터유지가 필요한 경우가 많다. 
정보가 유지되지 않으면 매번 페이지 이동시 마다 로그인을 해야하거나 장바구니에서 상품을 선택했는데 구매페이지에서 상품의 정보가 사라지는 경우가 생길 것이다. 이러한 이유로 세션 또는 쿠키를 사용한다.

## 세션

세션은 사용자가 웹 브라우저를 통해 웹 서버에 접속한 시점부터 웹 브라우저를 종료하여 연결을 끝내는 시점까지, 같은 사용자로부터 오는 일련의 요청을 하나의 상태로 보고, 그 상태를 일정하게 유지하는 기술이다.
즉, 방문자가 웹 서버에 접속해 있는 상태를 하나의 단위로 보고 그것을 세션이라고 한다.\

### 특징

- 웹 서버에 웹 컨테이너의 상태를 유지하기 위한 정보를 저장
- 각 클라이언트의 고유 세션 ID를 부여한다. 이 세션 ID로 클라이언트를 구분하여 각 요구에 맞는 서비스를 제공

### 동작 순서

1. 클라이언트 요청 (사용자 웹사이트 접근)
2. 서버는 접근 클라이언트의 Request-Header 필드인 Cookie 를 확인하여, 클라이언트가 해당 세션 ID를 보냈는지 확인
3. 세션 ID가 존재하지 않으면, 세션 ID를 생성하여 클라이언트에 전송
4. 서버에서 클라이언트로 준 세션ID를 쿠키로 서버에 저장
5. 재접속 시 쿠키를 이용하여 세션 ID 값을 서버에 전달

세션은 쿠키에 비해 보안이 좋지만 서버에 저장 돼, 자원을 사용하기 때문에 사용자가 많을 시 소모되는 자원이 상당하다. 

만약 트래픽이 많아져 Scale-out을 했을 때, 세션을 어떻게 공유하여 정합성 이슈를 해결할까?