자바스크립트는 싱글 스레드 언어이다. 단일 콜 스택을 가지는데, 브라우저나 Node.js 환경이 제공하는 비동기 처리 메커니즘 덕분에 여러 작업을 동시에 수행할 수 있다.

JS는 브라우저의 Web API나 Node의 libuv, 이벤트 루프, 태스크 큐를 디용해 비동기 작업을 동시에 처리한다.

비동기 작업이 발생하면, 해당 작업(타이머, 네트워크 요청 등)은 브라우저의 Web API에 위임된다. 예를 들어, `setTimeout` 이나 `fetch` 와 같은 작업이 수행되면 자바스크립트 엔진은 이 작업들을 Web API에 넘기고 다른 코드를 실행한다. Web API에서 비동기 작업이 완료되면, 그 작업은 태스크 큐에 들어가 대기한다.

이후 이벤트 루프가 콜 스택이 비어있는지 확인한 뒤 태스크 큐에서 대기 중인 작업을 콜 스택으로 가져와 실행한다. 이러한 구조 덕분에 JS는 싱글 스레드임에도 비동기적으로 작업을 처리하여 다양한 작업을 효율적으로 관리할 수 있다. 이 메커니즘 덕분에 UI 인터랙션이 끊기지 않으며, 대기 시간이 필요한 작업도 동시에 실행되는 것과 같이 동작한다.

## Task Queue

JS 태스크 큐에는 크게 매크로태스크 큐와 마이크로태스크 큐로 나뉜다. 비동기 작업의 우선순위를 관리하고, 이벤트 루프가 적절한 시점에 콜백을 실행하기 위해 사용된다.

### 매크로태스크 큐

일반적으로 비동기 작업의 콜백이 저장되는 큐이다.
`setTimeout`, `setInterval`, I/O 작업, 이벤트 핸들로 등은 작업 완료 후 매크로태스크 큐에 콜백을 대기시킨다. 매크로태스크 큐는 이벤트 루프의 한 번의 반복만다 하나의 태스크만 처리되므로, UI 업데이트나 다른 작업과 균형 있게 진행된다.

### 마이크로태스크 큐

더 높은 우선순위가 필요한 비동기 작업들이 대기하는 큐이다.
`Promise.then`, `MutationObserver` 등의 비동기 콜백이 여기에 저장된다. 이벤트 루프는 매크로태스크를 실행하기 전에 항상 마이크로태스크 큐를 먼저 확인하고, 모든 마이크로태스크를 처리한 후 매크로태스크로 넘어간다. 이 방식으로 마이크로태스크 큐의 작업은 높은 우선순위로 처리된다. 